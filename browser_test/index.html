<html>
	<head>		
		<title>ala.carte</title>
		<meta content="">
		<link rel="stylesheet" href="leaflet.css" />
		<!--[if lte IE 8]>
			<link rel="stylesheet" href="leaflet.ie.css" />
		<![endif]-->
		<script src="leaflet.js"></script>
		<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
		<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
		<script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
		<script>
		$(function() {
			$( "#slider-vertical" ).slider({
				orientation: "vertical",
				range: "min",
				min: 0,
				max: 100,
				value: 70,
				start: function( event, ui ) {
					map.dragging.disable();
				},
				slide: function( event, ui ) {
					alaCarte.setOpacity(ui.value/100);
					if (ui.value == 100) {
						osm.setOpacity(0);
					} else {
						osm.setOpacity(1);
					}
					
					$( "#amount" ).val( ui.value );
				},
				stop: function( event, ui ) {
					map.dragging.enable();
				}
			});
			$( "#amount" ).val( $( "#slider-vertical" ).slider( "value" ) );
		});
		</script>
	</head>
	<body style="width: 100%; height: 100%; margin: 0 0 0 0;">
		<div id="map" style="width: 100%; height: 100%;"></div>
		<script>
		
		
			var osm = L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
				maxZoom: 18,
				attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, Imagery &copy; alaCarte',
				unloadInvisibleTiles: false,
				reuseTiles: true });

			var cairo = L.tileLayer('http://localhost:8080/cairo/{z}/{x}/{y}.png', {
				maxZoom: 18,
				attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, Imagery &copy; alaCarte',
				unloadInvisibleTiles: false });
			var ours = L.tileLayer('http://localhost:8080/{z}/{x}/{y}.png', {
				maxZoom: 18,
				attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, Imagery &copy; alaCarte',
				unloadInvisibleTiles: false });
			
			var map = L.map('map', {layers: [osm]});
			map.setView([56.8575, 60.6125], 16);
			
			var baseMaps = {
				"Mapnik": osm
			};
			var overlayMaps = {
				"Cairo": cairo,
				"Ours": ours,
			};
			
			L.control.layers(baseMaps, overlayMaps).addTo(map);
			L.control.scale().addTo(map);
			L.Control.Zoom('topleft')
			
			
			var MyControl = L.Control.extend({
				options: {
					position: 'topright'
				},

				onAdd: function (map) {
					// create the control container with a particular class name
					var container = L.DomUtil.get('slider-vertical');
					// ... initialize other DOM elements, add listeners, etc.

					return container;
				}
			});

			map.addControl(new MyControl());

		</script>
	</body>
</html>
